<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>개발자 박범준의 포트폴리오</title>
    <link rel="stylesheet" href="style/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <nav>
            <div class="logo">박범준 포트폴리오</div>
            <ul class="nav-links">
                <li><a href="#project1">프로젝트 1</a></li>
                <li><a href="#project2">프로젝트 2</a></li>
                <li><a href="#project3">프로젝트 3</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="intro">
            <h1>개발자 박범준의 포트폴리오</h1>
            <p>안녕하세요! "전공을 넘어서, 컴퓨터 구조와 흐름을 깊이 이해하고 백엔드를 프론트로 자연스럽게 연결하는 개발자 박범준입니다."</p>
            <a>저는 Flask, Python, JavaScript를 주로 사용하는 신입 개발자로서 다양한 개인 프로젝트를 통해 기술을 연마하고 있습니다. 새로운 기술을 배우고, 실제 문제를 해결하는 과정에서 성장하고자 노력하고 있습니다.</a>
        </section>

        <!-- 프로젝트 1 -->
        <section id="project1" class="project">
            <div class="header">
                <h2>1. Flask 웹 게시판 애플리케이션</h2>
            </div>
            <div class="content">
                <p>이 프로젝트는 Flask 기반 웹 애플리케이션으로, 사용자 인터랙션과 데이터 처리를 관리합니다. 데이터베이스 연동과 파일 업로드, 게시글 작성 기능을 제공합니다.</p>
                <h3>사용 기술</h3>
                <ul>
                    <li><strong>Python:</strong> 강력하고 다양한 라이브러리를 지원하는 프로그래밍 언어로 백엔드 개발에 사용됩니다.</li>
                    <li><strong>Flask:</strong> Python 기반의 경량 WSGI 웹 애플리케이션 프레임워크입니다.</li>
                    <li><strong>MySQL:</strong> 관계형 데이터베이스 관리 시스템(RDBMS)으로, 데이터 저장 및 검색에 사용됩니다.</li>
                    <li><strong>HTML/CSS:</strong> 사용자 인터페이스 구성 및 스타일링에 사용됩니다.</li>
                    <li><strong>JavaScript:</strong> 동적인 웹 페이지 기능을 구현하는데 사용됩니다.</li>
                </ul>
                <h3>주요 기능</h3>
                <ul>
                    <li>사용자 등록 및 로그인</li>
                    <li>게시글 작성, 수정, 삭제</li>
                    <li>파일 업로드 및 관리</li>
                </ul>
                <h3>핵심 코드</h3>
                <h4>1. 데이터베이스 설정</h4>
                <pre>
from flask_sqlalchemy import SQLAlchemy
app.config['SQLALCHEMY_DATABASE_URI'] = 'mysql://user:password@localhost/dbname'
db = SQLAlchemy(app)
                </pre>
                <p>이 설정은 Flask 애플리케이션에서 MySQL 데이터베이스에 연결하는 데 사용됩니다.</p>
                
                <h4>2. 사용자 인증</h4>
                <pre>
from flask_login import LoginManager, UserMixin, login_user
login_manager = LoginManager(app)
login_manager.login_view = 'login'

class User(UserMixin, db.Model):
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(100), unique=True)
    password_hash = db.Column(db.String(200))

@login_manager.user_loader
def load_user(user_id):
    return User.query.get(int(user_id))
                </pre>
                <p>Flask-Login을 사용하여 사용자 세션 관리와 인증을 처리합니다.</p>
                
                <h3>홈페이지</h3>
                <div class="image-gallery">
                    <div>
                        <p>메인페이지</p>
                        <img src="data/board_main.png" alt="메인페이지 이미지" class="gallery-item" loading="lazy">
                    </div>
                    <div>
                        <p>로그인 페이지</p>
                        <img src="data/login_page.png" alt="로그인 페이지 이미지" class="gallery-item" loading="lazy">
                    </div>
                    <div>
                        <p>회원가입 페이지</p>
                        <img src="data/register_page.png" alt="회원가입 페이지 이미지" class="gallery-item" loading="lazy">
                    </div>
                    <div>
                        <p>게시글 작성 페이지</p>
                        <img src="/data/write_post.png" alt="게시글 작성 페이지 이미지" class="gallery-item" loading="lazy">
                    </div>
                    <div>
                        <p style="font-size: 15px;">게시글 페이지 영상 업로드 및 재상 영상</p>
                        <video class="gallery-item" muted aria-label="게시글 페이지 동영상" loading="lazy">
                            <source src="data/post_video.mov" type="video/mp4">
                            동영상이 지원되지 않습니다.
                        </video>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 프로젝트 2 -->
        <section id="project2" class="project">
            <div class="header">
                <h2>2. 주식 데이터 관리 웹 애플리케이션</h2>
            </div>
            <div class="content">
                <p>이 프로젝트는 Flask와 Plotly.js를 사용하여 주식 데이터를 추가하고 시각화하는 웹 애플리케이션입니다. 사용자는 주식을 추가, 편집할 수 있으며, 선택한 주식의 그래프를 시각화하여 볼 수 있습니다.</p>

                <h3>사용 기술</h3>
                <ul>
                    <li><strong>Python (Flask)</strong></li>
                    <li><strong>JavaScript (Plotly.js, jQuery)</strong></li>
                    <li><strong>HTML/CSS (Bootstrap)</strong></li>
                    <li><strong>MySQL 또는 SQLite (데이터베이스)</strong></li>
                </ul>

                <h3>주요 기능</h3>
                <ul>
                    <li>주식 추가 및 편집</li>
                    <li>주식 데이터 시각화 (Plotly.js 사용)</li>
                    <li>사용자 친화적인 인터페이스 (Bootstrap 스타일 적용)</li>
                </ul>

                <h3>핵심 코드</h3>

                <h4>1. 데이터베이스 설정 및 모델 정의</h4>
                <pre>
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///stocks.db'
db = SQLAlchemy(app)

class Stock(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(50), nullable=False)
    ticker = db.Column(db.String(10), unique=True, nullable=False)
                </pre>
                <p><strong>설명:</strong> 이 코드는 Flask 애플리케이션과 SQLite 데이터베이스를 연결하며, 주식 정보를 저장할 'Stock' 모델을 정의합니다. 각 주식은 고유한 'id', 'name', 'ticker' 필드를 가지며, 'ticker'는 고유해야 합니다.</p>

                <h4>2. 주식 추가 기능</h4>
                <pre>
@app.route('/add_stock', methods=['GET', 'POST'])
def add_stock():
    if request.method == 'POST':
        name = request.form['name']
        ticker = request.form['ticker']
        new_stock = Stock(name=name, ticker=ticker)
        db.session.add(new_stock)
        db.session.commit()
        return redirect(url_for('index'))
    return render_template('add_stock.html')
                </pre>
                <p><strong>설명:</strong> 이 함수는 '/add_stock' URL에서 주식을 추가하는 기능을 처리합니다. 사용자가 폼을 통해 주식명을 입력하면, 새로운 주식 데이터를 데이터베이스에 저장하고 'index' 페이지로 리디렉션합니다.</p>

                <h4>3. 주식 데이터 시각화 및 검색</h4>
                <pre>
$('#search-form').on('submit', function(event) {
    event.preventDefault();
    const company_name = $('#company_name').val();
    fetchGraph(company_name, '3mo');
});

function fetchGraph(company_name, period) {
    $.ajax({
        url: "{{ url_for('update_chart') }}",
        type: "POST",
        contentType: "application/json",
        data: JSON.stringify({
            company_name: company_name,
            period: period
        }),
        success: function(response) {
            $('#graph-container').html(response.graph);
        },
        error: function(response) {
            alert(response.responseJSON.error);
        }
    });
}
                </pre>
                <p><strong>설명:</strong> 이 코드는 사용자가 주식명을 입력하고 검색하면 주식 가격 변동 그래프를 가져오는 기능을 수행합니다. 'fetchGraph' 함수는 Ajax 요청을 통해 서버에서 주식 데이터를 가져오고, 응답받은 그래프를 페이지에 표시합니다.</p>

                <h4>4. 주식 편집 기능</h4>
                <pre>
@app.route('/edit_stock/<int:id>', methods=['GET', 'POST'])
def edit_stock(id):
    stock = Stock.query.get_or_404(id)
    if request.method == 'POST':
        stock.name = request.form['new_name']
        stock.ticker = request.form['new_ticker']
        db.session.commit()
        return redirect(url_for('index'))
    return render_template('edit_stock.html', stock=stock)
                </pre>
                <p><strong>설명:</strong> 이 라우트는 주식 데이터를 편집할 수 있는 기능을 제공합니다. 사용자가 폼을 통해 주식명과 티커 코드를 수정하고 이를 데이터베이스에 저장합니다.</p>

                <h3>스크린샷</h3>
                <div class="image-gallery">
                    <div>
                        <p>주식 추가 페이지</p>
                        <img src="data/add_stock.png" alt="주식 추가 페이지" class="gallery-item" loading="lazy">
                    </div>
                    <div>
                        <p>주식 시각화 페이지</p>
                        <img src="data/visualize_stock.png" alt="주식 시각화 페이지" class="gallery-item" loading="lazy">
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 프로젝트 3 -->
        <section id="project3" class="project">
            <div class="header">
                <h2>3. 포트홀 감지 및 관리 시스템</h2>
            </div>
            <div class="content">
                <p>이 프로젝트는 Flask와 MySQL을 사용하여 실시간으로 포트홀을 감지하고, 감지된 데이터를 MySQL 데이터베이스에 저장하는 시스템입니다. 사용자 로그인 및 회원가입 기능을 통해 인증된 사용자만이 시스템을 사용할 수 있으며, 데이터 조회와 삭제 기능을 제공합니다.</p>

                <h3>사용 기술</h3>
                <ul>
                    <li><strong>Python (Flask, OpenCV, YOLO)</strong>: 서버 로직과 비디오 처리 및 객체 감지</li>
                    <li><strong>MySQL</strong>: 사용자 정보와 감지 데이터를 저장 및 관리</li>
                    <li><strong>HTML/CSS/JavaScript</strong>: 사용자 인터페이스와 동적인 기능 제공</li>
                </ul>

                <h3>주요 기능</h3>
                <ul>
                    <li>사용자 로그인 및 회원가입</li>
                    <li>포트홀 감지 및 데이터 저장</li>
                    <li>감지된 데이터 조회 및 삭제 기능</li>
                </ul>

                <h3>핵심 코드</h3>

                <!-- 회원가입 및 로그인 로직 -->
                <h4>1. 회원가입</h4>
                <pre>
@app.route('/register', methods=['GET', 'POST'])
def register():
    if request.method == 'POST':
        username = request.form['username']
        password = request.form['password']
        email = request.form['email']
        hashed_password = generate_password_hash(password)
        cursor = g.db.cursor()
        insert_query = "INSERT INTO users (username, password, email) VALUES (%s, %s, %s)"
        cursor.execute(insert_query, (username, hashed_password, email))
        g.db.commit()
        return redirect('/login')
    return render_template('register.html', page_title='회원가입')
                </pre>
                <p><strong>설명:</strong> 이 코드는 사용자가 회원가입할 수 있도록 처리하는 로직입니다. 사용자가 입력한 비밀번호는 해시 처리되어 MySQL 데이터베이스에 저장됩니다. 데이터베이스에 삽입된 후, 로그인 페이지로 리디렉션됩니다.</p>

                <h4>2. 로그인</h4>
                <pre>
@app.route('/login', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        username = request.form['username']
        password = request.form['password']
        cursor = g.db.cursor(dictionary=True)
        cursor.execute("SELECT * FROM users WHERE username = %s", (username,))
        user = cursor.fetchone()
        if user and check_password_hash(user['password'], password):
            session['user_id'] = user['id']
            session['username'] = user['username']
            return redirect('/dashboard')
    return render_template('login.html', page_title='로그인')
                </pre>
                <p><strong>설명:</strong> 이 코드는 로그인 로직을 담당합니다. 사용자가 입력한 아이디와 비밀번호가 데이터베이스에 저장된 정보와 일치하는지 확인하고, 일치할 경우 세션에 사용자 정보를 저장한 후 대시보드로 이동합니다.</p>
                
                <!-- 포트홀 감지 및 데이터 저장 -->
                <h4>3. 포트홀 감지 및 데이터 저장</h4>
                <pre>
model = YOLO('model/best.pt')
cap = cv2.VideoCapture('sample_video.mp4')
while cap.isOpened():
    ret, frame = cap.read()
    if not ret:
        break
    results = model(frame)
    annotated_frame = results[0].plot()
    box_detected = any(detection.cls[0].item() == target_class for detection in results[0].boxes)
    
    if box_detected:
        image_file_name = f'{datetime.now().strftime("%H-%M-%S")}.jpg'
        image_file_path = os.path.join(image_directory, image_file_name)
        cv2.imwrite(image_file_path, annotated_frame)
        cursor.execute("INSERT INTO images (user_id, image_url, capture_time) VALUES (%s, %s, %s)", (logged_in_user_id, image_file_path, datetime.now()))
        g.db.commit()
    cv2.imshow(window_name, annotated_frame)
    if cv2.waitKey(1) & 0xFF == 27:
        break
cap.release()
cv2.destroyAllWindows()
                </pre>
                <p><strong>설명:</strong> 이 코드는 YOLO 모델을 사용하여 비디오에서 실시간으로 포트홀을 감지하는 기능을 담당합니다. 감지된 이미지 파일은 지정된 경로에 저장되며, 이미지의 경로와 캡처 시간은 MySQL 데이터베이스에 기록됩니다.</p>
    
                <h3>스크린샷</h3>
                <div class="image-gallery">
                    <div>
                        <p>로그인</p>
                        <img src="data/login_hidden.png" alt="로그인 화면" class="gallery-item" loading="lazy">
                    </div>
                    <div>
                        <p>회원가입</p>
                        <img src="data/register_pothole.png" alt="회원가입 화면" class="gallery-item" loading="lazy">
                    </div>
                    <div>
                        <p>로그인</p>
                        <img src="data/login_visible.png" alt="로그인 화면" class="gallery-item" loading="lazy">
                    </div>

                    <div>
                        <p>대시보드</p>
                        <img src="data/pothole_dashboard.png" alt="대시보드 화면" class="gallery-item" loading="lazy">
                    </div>
                    <p style="font-size: 20px;">객체 인식 모델 실행 영상</p>
                    <video class="gallery-item" muted aria-label="객체 인식 모델 실행 영상" loading="lazy">
                        <source src="data/model_detection.mov" type="video/mp4">
                        동영상이 지원되지 않습니다.
                    </video>
                </div>
            </div>
        </section>
    </main>

    <!-- 모달 -->
    <div id="mediaModal" class="modal" role="dialog" aria-modal="true">
        <span class="close">&times;</span>
        <div class="modal-content">
            <img id="modalImage" src="" alt="확대된 이미지" style="display: none;">
            <video id="modalVideo" controls style="display: none; width: 100%;">
                <source src="" type="video/mp4">
                동영상이 지원되지 않습니다.
            </video>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="style/style.js"></script>
</body>
</html>